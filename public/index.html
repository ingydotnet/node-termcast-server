<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
	<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>Stackato Termcast Server</title>


  <link rel="stylesheet" href="css/foundation.css" />
  <link rel="stylesheet" href="css/termcast.css" />


  <script src="js/vendor/custom.modernizr.js"></script>

</head>
<body>
  <a href="http://www.activestate.com/stackato"><img src="http://community.activestate.com/sites/all/themes/community/img/stackato.png" /></a>

  <div class="row">
    <div class="large-12 columns">
      <h2>Stackato Termcast Server</h2>
      <p>Broadcast your terminal session by running this command:</p>
      <p><tt>termcast %TERMCAST-ARGS%</tt></p>
      <hr />
    </div>
  </div>

  <div class="row">
    <div class="large-6 columns">
      <div id="is-streaming">
        <h3>Streaming right now:</h3>
        <div class="row">
          <table id="streams-table">
            <thead>
              <tr>
                <th>Broadcaster</th>
                <th>Cols</th>
                <th>Rows</th>
                <th>Viewers</th>
              </tr>
            </thead>
            <tbody id="streams"> </tbody>
          </table>
        </div>
      </div>
      <div id="not-streaming"></div>
    </div>
  </div>

  <div class="row">
    <div class="large-12 columns">
      <hr />
      <p>You can install the <tt>termcast</tt> client from
      <a href="https://metacpan.org/module/App::Termcast">here</a>, or with this command:</p>
      <p><tt>cpanm App::Termcast</tt></p>
    </div>
  </div>

  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
  '.js><\/script>')
  </script>

  <script src="js/foundation.min.js"></script>
  <!--

  <script src="js/foundation/foundation.js"></script>

  <script src="js/foundation/foundation.alerts.js"></script>

  <script src="js/foundation/foundation.clearing.js"></script>

  <script src="js/foundation/foundation.cookie.js"></script>

  <script src="js/foundation/foundation.dropdown.js"></script>

  <script src="js/foundation/foundation.forms.js"></script>

  <script src="js/foundation/foundation.joyride.js"></script>

  <script src="js/foundation/foundation.magellan.js"></script>

  <script src="js/foundation/foundation.orbit.js"></script>

  <script src="js/foundation/foundation.reveal.js"></script>

  <script src="js/foundation/foundation.section.js"></script>

  <script src="js/foundation/foundation.tooltips.js"></script>

  <script src="js/foundation/foundation.topbar.js"></script>

  <script src="js/foundation/foundation.interchange.js"></script>

  <script src="js/foundation/foundation.placeholder.js"></script>

  -->

  <script>
    $(document).foundation();
    $(function() {
      $.get('/data/streams', function(data) {
        var anybodyStreaming = false;
        for (id in data) {
          anybodyStreaming = true;
          $('#streams').append(
          "<tr><td><a href=\"/terminal/index.html?" + id +
          "\">" + data[id].user + "</a></td><td>" +
          data[id].geometry[0] + "</td><td>" +
          data[id].geometry[1] + "</td><td>" +
          (data[id].viewers ? data[id].viewers : 0) + "</td>" +
          "</li>");
        }
        if (!anybodyStreaming) {
          $('#is-streaming').hide();
          $('#not-streaming').show();
        }
      });
    });
  </script>
</body>
</html>
